# bytecode-gen

开始的时候，如何写bytecode-gen的代码，我并不清晰。……（消耗时间思考）……后来，我想，噢～～～它原来是这么一回事。我的思路是这样的：先说说“自己结论是什么”，再去说说“为什么有这样的结论”，最后说说“到底怎么做”。

第一部分，我的结论是什么呢？我的结论：**它是一个“转换”的过程，将“一种结构”转换成“另外一种结构”**。如果上面的结论再简化一下，那就是“**由A结构转换成B结构**”。

第二部分，我的结论为什么是这样的呢，为什么这么说呢？可以这样理解，“A结构”就是“一种符合人类思考的代码结构”，我们在写代码的时候，就是在遵循人形成的某种思维习惯来写代码；而“B结构”就是“一种符合JVM运行的ClassFile结构”，JVM能够理解它，能够运行它。更进一步的说，它是一种“思维模式”的转换，由“有生命的人类”转换成“无生命的机器（JVM）”的思维转换。

第三部分，到底应该怎么做呢，怎么写代码呢？总得来说，就是“整理已有的知识，来一步一步的解决小的问题，最终解决大问题”。

- （1）从“目标”的角度思考，整理已有的知识，即ClassFile的结构，明晰需要哪些信息。
- （2）从“初始”的角度思考，为了满足这些信息，需要怎样写代码。
- （3）从“过程”的角度思考，要一步一步的解决小的问题，而不是一下子解决大的问题，要一步一步的解决简单的问题，而不是一下子解决复杂的问题。

## MethodGen



- [ ] MethodGen的本质
  - [x] access_flags 访问标志
  - [x] name_index 方法名字
  - [x] descriptor_index 方法签名
  - [ ] attributes 具体属性 和 attributes_count 属性数量 这两个是一体的
    - [ ] Code
      - [ ] attribute_name_index
      - [ ] attribute_length
      - [ ] max_stack
      - [ ] max_locals
      - [ ] code_length和code
      - [ ] exception_table_length和exception_table
      - [ ] attributes_count和attributes
